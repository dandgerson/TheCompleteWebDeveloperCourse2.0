!function t(e,n,i){function s(r,a){if(!n[r]){if(!e[r]){var d="function"==typeof require&&require;if(!a&&d)return d(r,!0);if(o)return o(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[r]={exports:{}};e[r][0].call(u.exports,function(t){var n=e[r][1][t];return s(n?n:t)},u,u.exports,t,e,n,i)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}({1:[function(t,e,n){function i(){for(var t=p+"=",e=document.cookie.split(";"),n=0;n<e.length;n++){for(var i=e[n];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}}function s(t){var e=o(),n=30,i="path=/",s="domain="+e,r="expires="+new Date((new Date).getTime()+6e4*n).toUTCString();return document.cookie=[p+"="+t,i,s,r].join("; "),r}function o(){for(var t="weird_get_top_level_domain=cookie",e=document.location.hostname.split("."),n=e.length-1;n>=0;n--){var i=e.slice(n).join(".");if(document.cookie=t+";domain=."+i+";",document.cookie.indexOf(t)>-1)return document.cookie=t.split("=")[0]+"=;domain=."+i+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",i}}function r(t){var e;try{e=i();var n=JSON.parse(decodeURIComponent(e));if(n.businessUnitId===t)return n}catch(s){if(e){var o="domain="+window.location.hostname.replace(/^.*\.([^.]+\.[^.]+)/,"$1");document.cookie=p+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;"+o}}}function a(t){if(t)return s(encodeURIComponent(JSON.stringify(t)))}function d(t,e){var n=r(t);return n?void e(n):void c.xhrGet({url:h+"//widget.trustpilot.com/v1/ratios/"+t,success:function(n){var i=g(n,t),s=a(i);e(i,s)},error:function(){e(null)}})}function l(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e}var u=t("./constants.js").OFF,c=t("./xhr.js"),h="https:"==document.location.protocol?"https:":"http:",p="TrustboxSplitTest",g=function(t,e){if(!t||!t.groups)return null;for(var n=0,i=0,s=[],o=0;o<t.groups.length;o++)"number"==typeof t.groups[o].ratio&&(n+=t.groups[o].ratio,++i,s.push(t.groups[o]));if(0===i)return null;1===i&&n<1&&(s.push({name:u,ratio:1-n}),n=1);var r=0,a=Math.random()*n,d=s[0].name,c=[];for(o=0;o<s.length;o++)a>=r&&a<r+s[o].ratio&&(d=s[o].name),c.push(s[o].name),r+=s[o].ratio;return{allGroups:c,group:d,businessUnitId:e,session:l(),anonymousId:l()}};e.exports={getABSettingsAsync:d}},{"./constants.js":3,"./xhr.js":7}],2:[function(t,e,n){function i(t,e,n,i){var o={element:t,type:e,options:i};if(o.removeEventListener=function(){s(this.element,this.type,this.listener,this.options)},t.addEventListener)t.addEventListener(e,n,i),o.listener=n;else if(t.attachEvent){var r=function(t){t=t||window.event,t.preventDefault=t.preventDefault||function(){t.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){t.cancelBubble=!0},n.call(void 0,t)};t.attachEvent("on"+e,r),o.listener=r}return o}var s=function(t,e,n,i){t.removeEventListener?t.removeEventListener(e,n,i):t.removeEventListener&&t.detachEvent("on"+e,n)};e.exports=i},{}],3:[function(t,e,n){e.exports={EMPTY_WIDGET_ID:"000000000000000000000000",OFF:"OFF"}},{}],4:[function(t,e,n){function i(t){try{if(r)return;var e=document.createElement("script");e.setAttribute("type","application/ld+json"),e.innerHTML=JSON.stringify(t),document.head.appendChild(document.createComment("Added by Trustpilot")),document.head.appendChild(e),document.head.appendChild(document.createComment("/Added by Trustpilot")),r=!0}catch(n){}}function s(t,e,n,i,s){var o=d+"//widget.trustpilot.com/data/jsonld/business-unit/"+e+"?type="+t+"&url="+encodeURIComponent(window.location.href)+"&templateId="+i+"&locale="+n;a.xhrGet({url:o,success:function(t){t.url=document.location.href,s(t)},error:function(t){console.error(t)}})}function o(t,e,n,i,s,o,r){var l=e&&e.split("-")[0],u="5763ba71ba484803e8b222ba"===n||"5763bccae0a06d08e809ecbb"===n,c="/data/jsonld/business-unit/"+t+"/product",h="/data/jsonld/business-unit/"+t+"/product-imported",p=u?h:c,g=d+"//widget.trustpilot.com"+p+"?sku="+encodeURIComponent(s)+"&numberOfReviews="+(o||10)+"&productName="+i+"&language="+l+"&templateId="+n+"&url="+encodeURIComponent(window.location.origin+window.location.pathname);a.xhrGet({url:g,success:r,error:function(t){console.error(t)}})}var r=!1,a=t("./xhr.js"),d="https:"==document.location.protocol?"https:":"http:",l=function(t){return!r&&(t.schemaType?(s(t.schemaType,t.businessunitId,t.locale,t.templateId,i),!0):!(!t.name||!t.sku)&&(o(t.businessunitId,t.locale,t.templateId,t.name,t.sku,t.reviewnumber,i),!0))};e.exports=l},{"./xhr.js":7}],5:[function(t,e,n){function i(t,e,n,i,s,o){this.window=t,this.document=e,this.ABSettings=i,this.Widget=n,this.widgets=[],this.stats={applied:0,findAndApplyCalls:0},this.version=s,this.speedyWidgetIds=o.split(",")}function s(t){if(t.getElementsByClassName)return t.getElementsByClassName("trustpilot-widget");if(t.querySelectorAll)return t.querySelectorAll(".trustpilot-widget");for(var e=[],n=new RegExp("(^| )trustpilot-widget( |$)"),i=t.body.getElementsByTagName("*"),s=0,o=i.length;s<o;s++)n.test(i[s].className)&&e.push(i[s]);return e}function o(t){for(var e=s(t),n=[],i=0;i<e.length;i++)n.push(r(e[i]));return{elements:e,datasets:n}}function r(t){if("undefined"!=typeof t.dataset)return t.dataset;if(t.attributes){for(var e=function(t){return t.replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")})},n={},i=0;i<t.attributes.length;i++){var s=t.attributes[i],o=s.name.match(/^data-(.+)$/i);if(o){var r=e(o[1]);n[r]=s.value}}return n}}function a(t,e,n){var i;return function(){var s=arguments,o=function(){i=null,t.apply(n,s)};clearTimeout(i),i=setTimeout(o,e)}}var d=t("./constants.js"),l=t("./addeventlistener.js"),u=d.OFF,c=d.EMPTY_WIDGET_ID;i.prototype.initializeOnPageLoad=function(){(this.document.attachEvent?"complete"===this.document.readyState:"loading"!==this.document.readyState)?window.Trustpilot.Modules.WidgetManagement.findAndApplyWidgets():this.window.attachEvent?this.window.attachEvent("onload",function(){window.Trustpilot.Modules.WidgetManagement.findAndApplyWidgets()}):this.document.addEventListener("DOMContentLoaded",function(){window.Trustpilot.Modules.WidgetManagement.findAndApplyWidgets()})},i.prototype.findAndApplyWidgets=function(){this.stats.findAndApplyCalls+=1;var e=o(this.document),n=e.elements,i=e.datasets,s=null;if(n&&!(n.length<1)){this.removeWidgets(e.elements);for(var r=t("./snippets.js"),a=[],d=[],l=[],u=[],c=0;c<i.length;c++){var h=this.speedyWidgetIds.indexOf(i[c].templateId)>=0&&!("group"in i[c]);r(i[c])||h?(a.push(n[c]),d.push(i[c])):(l.push(n[c]),u.push(i[c]))}if(this.stats.speedyElements=a.length,this.stats.otherElements=l.length,a.length>0){var p=this.applyWidgets(a,d);this.stats.speedyApplied=p.length,this.setupViewTracking(p)}if(l.length>0){for(c=0;c<u.length;c++)if("group"in u[c]){s=u[c].businessunitId;break}this.stats.needABSettings=s||!1,this.finishOnComplete(l,u,s)}}},i.prototype.finishOnComplete=function(t,e,n){var i=this.window;"complete"===this.document.readyState?i.Trustpilot.Modules.WidgetManagement.finishEm(t,e,n):this.window.addEventListener("load",function(){i.Trustpilot.Modules.WidgetManagement.finishOnComplete(t,e,n)})},i.prototype.finishEm=function(t,e,n){if(n){var i=this;this.ABSettings.getABSettingsAsync(n,function(n,s){var o=i.applyWidgets(t,e,n,s);i.setupViewTracking(o)})}else{var s=this.applyWidgets(t,e);this.setupViewTracking(s)}},i.prototype.applyWidgets=function(t,e,n,i){for(var s=n&&n.session,o=n&&n.anonymousId,r=[],a=0;a<t.length;a++)if(this.checkWidgetDisplayAndUpdateDataset(n,e[a])){var d=new this.Widget(t[a],e[a],s,o,i);this.stats.applied+=1,this.widgets.push(d),r.push(d)}return r},i.prototype.checkWidgetDisplayAndUpdateDataset=function(t,e){return!(t&&"group"in e)||(t.group==e.group||t.group==u&&(e.templateId=c,e.styleHeight="0",e.group=u,!0))},i.prototype.removeWidgets=function(t){t=void 0===t?s(this.document):t;for(var e=0;e<t.length;++e)for(;t[e].firstChild;)t[e].removeChild(t[e].firstChild)},i.prototype.setupViewTracking=function(t){this.widget_views=t.slice();var e=a(function(){for(var t=0;t<this.widget_views.length;t++){var e=this.widget_views[t],n=e.id===c,o=n;n||(o=e.trackVisibility()),o&&this.widget_views.splice(t,1)}0===this.widget_views.length&&(i.removeEventListener(),s.removeEventListener())},100,this),n={passive:!0,capture:!1},i=l(window,"scroll",e,n),s=l(window,"resize",e,n);e()},e.exports=i},{"./addeventlistener.js":2,"./constants.js":3,"./snippets.js":4}],6:[function(t,e,n){function i(){var t=Math.random();return i[t]?i():(i[t]=!0,t)}function s(t){t=t.toLowerCase();var e=/(px|\%)/i,n="";return t&&t.length>0&&(n=e.test(t)?t:t+"px"),n}function o(t,e,n,o,r){if(!t)throw"No container supplied for TrustBox";if(!e)throw"No dataset supplied for TrustBox";if(!e.templateId)throw"No templateId supplied for TrustBox";if(!e.businessunitId)throw"No businessunitId supplied for TrustBox";if(!e.locale)throw"No locale supplied for TrustBox";this.id=i(),this.session=n,this.group=e.group,this.sessionExpiry=r,this.anonymousId=o,this.container=t,this.iframes={},this.stats={createIFrameCalls:0,iframeLoadEvents:0,events:{}},this.baseUrl=c+"/"+e.templateId+"/",this.queryString=this.createQueryStringFromDataSet(e),this.hasSentImpression=!1,this.container.style.position="relative",this.options={source:d,frameBorder:0,allowTransparency:"true",scrolling:"no",styles:{borderStyle:"none",backgroundColor:"transparent",display:"block",overflow:"hidden",height:s(e.styleHeight),width:s(e.styleWidth),position:"relative"},show:!0},this.createIFrame("main",this.options);var a=this;h(window,"message",function(t){if(t.origin===u&&"string"==typeof t.data){var e;try{e=JSON.parse(t.data)}catch(n){return void console.log("Invalid data sent on widget: "+t.data)}if(e.widgetId===a.id){var i={data:e,origin:t.origin};a.widgetIframeMessageHandler(i)}}},!1)}function r(t,e,n,i){var s=e?e:{};return s.position=t.styles.position||"",s.zindex=t.styles.zindex||"",s.margin=t.styles.margin||"",s.top=t.styles.top||"",s.bottom=t.styles.bottom||"",s.left=t.styles.left||"",s.right=t.styles.right||"",s.height=t.styles.height||"",s.width=t.styles.width||e.styles.width||"",s.display=t.show?"block":"none",s.src=n+t.source+i,s.borderStyle=e.styles.borderStyle,s.overflow=e.styles.overflow,s}function a(t){var e=document.createElement("iframe");return e.style.position=t.position,e.style.zIndex=t.zindex,e.style.margin=t.margin,e.style.top=t.top,e.style.bottom=t.bottom,e.style.left=t.left,e.style.right=t.right,e.style.height=t.height,e.style.width=t.width,e.style.borderStyle=t.borderStyle,e.style.backgroundColor=t.backgroundColor,e.style.display=t.display,e.style.overflow=t.overflow,e.frameBorder=t.frameBorder,e.scrolling=t.scrolling,e.allowTransparency=t.allowTransparency,e.title="Customer reviews powered by Trustpilot",e.src=t.src,e}var d="index.html",l="https:"==document.location.protocol?"https:":"http:",u=l+"//widget.trustpilot.com",c=l+"//widget.trustpilot.com/trustboxes",h=t("./addeventlistener.js");o.prototype={widgetIframeMessageHandler:function(t){switch(this.stats.events[t.data.command]=(this.stats.events[t.data.command]||0)+1,t.data.command){case"createIFrame":this.createIFrame(t.data.name,t.data);break;case"setStyle":this.setStyle(t.data.name,t.data.style);break;case"loaded":this.sendLoadedToMainFrame();break;case"message":this.sendMessage(this.iframes[t.data.name],t.data);break;case"resize-height":this.resizeHeight(t.data.name,t.data.height);break;case"impression":if(this.hasSentImpression)return;this.hasSentImpression=!0;var e=this.getTrackingData("impression-received");this.sendMessage(this.iframes.main,e),this.trackVisibility();break;case"product-review-data":}},getTrackingData:function(t){var e={command:t,url:window.document.URL,referrer:window.document.referrer,userAgent:window.navigator.userAgent,language:window.navigator.userLanguage||window.navigator.language,platform:window.navigator.platform};return this.session&&this.group&&(e.session=this.session,e.sessionExpiry=this.sessionExpiry),this.anonymousId&&(e.anonymousId=this.anonymousId),e},createQueryStringFromDataSet:function(t){var e="?";for(var n in t)e+=n+"="+encodeURIComponent(t[n])+"&";return e.replace(/(\&|\?)+$/,"")},createIFrame:function(t,e){this.stats.createIFrameCalls+=1;var n=a(r(e,this.options,this.baseUrl,this.queryString)),i=this;this.iframes[t]=n,this.container.appendChild(n),h(n,"load",function(){i.setWidgetId(n),i.stats.iframeLoadEvents+=1})},setStyle:function(t,e){var n=this.iframes[t]||this.iframes.main;for(var i in e)n.style[i]=e[i]},sendLoadedToMainFrame:function(){this.sendMessage(this.iframes.main,"loaded")},resizeHeight:function(t,e){if("number"==typeof e&&0!==e){var n=this.iframes[t]||this.iframes.main;n&&(n.style.height=e+"px")}},sendMessage:function(t,e){t.contentWindow&&(e=JSON.stringify(e),t.contentWindow.postMessage(e,u))},setWidgetId:function(t){this.sendMessage(t,{command:"setId",widgetId:this.id})},sendVisibilityData:function(){if(!this.hasSentViewTracking){this.hasSentViewTracking=!0;var t=this.getTrackingData("trustbox-in-viewport");this.sendMessage(this.iframes.main,t)}},trackVisibility:function(){if(this.hasSentViewTracking)return!0;if(this.hasBeenVisible)return this.hasSentImpression&&this.sendVisibilityData(),!0;var t=.5,e=this.isInViewport(t);return!!e&&(this.hasSentImpression?(this.sendVisibilityData(),!0):(this.hasBeenVisible=!0,!0))},isInViewport:function(t){var e=this.iframes.main.getBoundingClientRect(),n={width:e.width||this.iframes.main.offsetWidth,height:e.height||this.iframes.main.offsetHeight};return e.top>=0&&e.left>=0&&e.bottom-n.height*t<=(window.innerHeight||document.documentElement.clientHeight)&&e.right-n.width*t<=(window.innerWidth||document.documentElement.clientWidth)}},e.exports=o},{"./addeventlistener.js":2}],7:[function(t,e,n){function i(t){try{return JSON.parse(t.responseText)}catch(e){return t.responseText}}function s(t){var e=new window.XMLHttpRequest;e.open("GET",t.url,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onreadystatechange=function(){4===e.readyState&&(e.status>=200&&e.status<300?t.success(i(e)):t.error&&t.error(i(e)))},e.send()}e.exports={xhrGet:s}},{}],8:[function(t,e,n){!function(e,n){"use strict";try{!function(){var i=t("./lib/widget.js"),s=t("./lib/ab-settings.js"),o=t("./lib/widget-management.js");window.Trustpilot=window.Trustpilot||{},window.Trustpilot.Modules=window.Trustpilot.Modules||{},window.Trustpilot.Modules.WidgetManagement?window.Trustpilot.Modules.WidgetManagement.version!==e&&console&&console.log&&console.log("Detected legacy TrustBox bootstrap with version:",window.Trustpilot.Modules.WidgetManagement.version,", current:",e):(window.Trustpilot.Modules.WidgetManagement=new o(window,document,i,s,e,n),window.Trustpilot.Modules.WidgetManagement.initializeOnPageLoad())}()}catch(i){!function(){function t(t){console.error("Error on bootstrap:"+t);var e="//widget.trustpilot.com/feedback/report-error",n="error="+encodeURIComponent(t)+"&uri="+encodeURIComponent(document.URL),i=document.createElement("img");i.src=e+"?"+n}try{t("object"==typeof e?e.message:e)}catch(e){console.error("Error on error reporting method:"+e)}}()}}("1.153.1","5419b6a8b0d04a076446a9ad,56278e9abfbbba0bdcd568bc")},{"./lib/ab-settings.js":1,"./lib/widget-management.js":5,"./lib/widget.js":6}]},{},[8]);
//# sourceMappingURL=tp.widget.bootstrap.min.js.map
